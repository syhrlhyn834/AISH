<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Chatbot</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h1>AI Chatbot</h1>
        </div>
        <div class="chat-log">
            <div class="chat-message">
                <div class="message-text">
                    Hello! I am an AI chatbot. Ask me anything!
                </div>
            </div>
        </div>
        <div class="chat-input">
            <form onsubmit="return sendMessage()">
                <input type="text" id="user-input" placeholder="Type your message here...">
                <button type="submit">Send</button>
            </form>
        </div>
    </div>

    <script>
        const chatLog = document.querySelector('.chat-log');
        const userInput = document.querySelector('#user-input');

        async function sendMessage() {
            event.preventDefault();
            const message = userInput.value;
            if (message.trim() === '') {
                return;
            }

            // Add user message to chat log
            const userMessage = document.createElement('div');
            userMessage.className = 'chat-message user-message';
            const messageText = document.createElement('div');
            messageText.className = 'message-text';
            messageText.innerText = message;
            userMessage.appendChild(messageText);
            chatLog.appendChild(userMessage);

            // Send message to server
            try {
                const response = await axios.post('/api/chat', { message: message, chat_log: chatLog.innerHTML });
                const botMessage = response.data.message;

                // Add bot message to chat log
                const botMessageElement = document.createElement('div');
                botMessageElement.className = 'chat-message bot-message';
                const botMessageText = document.createElement('div');
                botMessageText.className = 'message-text';
                botMessageText.innerText = botMessage;
                botMessageElement.appendChild(botMessageText);
                chatLog.appendChild(botMessageElement);

                // Clear user input
                userInput.value = '';

                // Scroll to bottom of chat log
                chatLog.scrollTop = chatLog.scrollHeight;
            } catch (error) {
                console.error(error);
            }
        }
    </script>
</body>
</html>
